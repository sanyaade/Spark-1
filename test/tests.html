<!DOCTYPE html>
<html lang='en'>
	<head>
		<meta http-equiv='Content-Type' content='text/html; charset=utf-8' />
		<link rel='stylesheet' type='text/css' href='qunit.css' />
	</head>
	
	<body>
		<p id='test' class='original' title='Original'>Test element</p>
		
		<h1 id="qunit-header">QUnit example</h1>
		<h2 id="qunit-banner"></h2>
		<div id="qunit-testrunner-toolbar"></div>
		<h2 id="qunit-userAgent"></h2>
		<ol id="qunit-tests"></ol>
		<div id="qunit-fixture">test markup, will be hidden</div>
		
		<script type='text/javascript' src='qunit.js'></script>
		<script type='text/javascript' src='../spark.js'></script>
		<script type='text/javascript'>
			module('ajax.get');
			
			test('Asynchronous request', function() {
				var data = Spark.ajax.get('ajaxtest.txt');
				equals('Loaded', data, 'Data should equal "Loaded"');
			});
			
			test('Asynchronous request to a file that does not exist', function() {
				var data = Spark.ajax.get('doesnotexist.txt');
				equals(false, data, 'Data should equal false');
			});
			
			test('Asynchronous request with parameters', function() {
				var data = Spark.ajax.get('ajaxtest.txt', {
					foo: 'bar',
					q: 'test'
				});
				equals('Loaded', data, 'Data should equal "Loaded"');
			});
			
			asyncTest('Synchronous request', function() {
				var data = Spark.ajax.get('ajaxtest.txt', false, function(data) {
					start();
					equals('Loaded', data, 'Data should equal "Loaded"');
				});
			});
			
			asyncTest('Synchronous request to a file that does not exist', function() {
				var data = Spark.ajax.get('doesnotexist.txt', false, function(data) {
					start();
					equals(false, data, 'Data should equal false');
				});
			});
			
			asyncTest('Synchronous request with parameters', function() {
				var data = Spark.ajax.get('ajaxtest.txt', {
					foo: 'bar',
					q: 'test'
				}, function(data) {
					start();
					equals('Loaded', data, 'Data should equal "Loaded"');
				});
			});
			
			
			
			module('ajax.post');
			
			test('Asynchronous request', function() {
				var data = Spark.ajax.post('ajaxtest.txt');
				equals('Loaded', data, 'Data should equal "Loaded"');
			});
			
			test('Asynchronous request to a file that does not exist', function() {
				var data = Spark.ajax.post('doesnotexist.txt');
				equals(false, data, 'Data should equal false');
			});
			
			test('Asynchronous request with parameters', function() {
				var data = Spark.ajax.post('ajaxtest.txt', {
					foo: 'bar',
					q: 'test'
				});
				equals('Loaded', data, 'Data should equal "Loaded"');
			});
			
			asyncTest('Synchronous request', function() {
				var data = Spark.ajax.post('ajaxtest.txt', false, function(data) {
					start();
					equals('Loaded', data, 'Data should equal "Loaded"');
				});
			});
			
			asyncTest('Synchronous request to a file that does not exist', function() {
				var data = Spark.ajax.post('doesnotexist.txt', false, function(data) {
					start();
					equals(false, data, 'Data should equal false');
				});
			});
			
			asyncTest('Synchronous request with parameters', function() {
				var data = Spark.ajax.post('ajaxtest.txt', {
					foo: 'bar',
					q: 'test'
				}, function(data) {
					start();
					equals('Loaded', data, 'Data should equal "Loaded"');
				});
			});
			
			
			
			module('attribute');
			
			test('Getting an attribute', function() {
				var attribute = $('p#test').attribute('title');
				equals('Original', attribute, 'Attribute should equal "Original"');
			});
			
			test('Setting an attribute', function() {
				var attribute = $('p#test').attribute('title', 'Title set').attribute('title');
				equals('Title set', attribute, 'Attribute should equal "Title set"');
			});
			
			test('Setting multiple attributes with an object', function() {
				var title = $('p#test').attribute({
					title: 'Title set with object',
					rel: 'Rel set with object'
				}).attribute('title');
				
				var rel = $('p#test').attribute('rel');
				
				equals('Title set with object', title, 'Title should equal "Title set with object"');
				equals('Rel set with object', rel, 'Rel should equal "Rel set with object"');
			});
			
			
			
			module('classes');
			
			test('Checking for a class', function() {
				var has = $('p#test').hasClass('original');
				var notHas = $('p#test').hasClass('nothas');
				equals(true, has, 'Has should equal true');
				equals(false, notHas, 'NotHas should equal false');
			});
			
			test('Adding a class', function() {
				var has = $('p#test').addClass('new').hasClass('new');
				equals(true, has, 'Has should equal true');
			});
			
			test('Removing a class', function() {
				var has = $('p#test').removeClass('new').hasClass('new');
				equals(false, has, 'Has should equal false');
			});
			
			
			
			module('cookies');
			
			test('Setting a session cookie', function() {
				Spark.cookie('test1', 'foo');
				equals('foo', Spark.cookie('test1'), 'The test1 cookie should equal "foo"');
			});
			
			test('Setting a timed cookie', function() {
				Spark.cookie('test2', 'bar', 100000);
				equals('bar', Spark.cookie('test2'), 'The test2 cookie should equal "bar"');
			});
			
			test('Getting a cookie that does not exist', function() {
				equals(false, Spark.cookie('doesnotexist'), 'The doesnotexist cookie should equal false because it does not exist');
			});
			
			
			
			module('data');
			
			test('Setting data', function() {
				$('p#test').data('foo', 'bar');
				equals('bar', $('p#test').data('foo'), 'The foo data should equal "bar"');
			});
			
			test('Getting data that does not exist', function() {
				equals(false, $('p#test').data('doesnotexist'), 'The doesnotexist data should equal false');
			});
			
			
			
			module('json');
			
			var json;
			var obj = {
			    someArray: ['foo', 'bar', 123],
			    someObject: { foo: 'bar', embedded: { eleet: 1337 } },
			    someString: '"Hi there!"',
			    someNumber: 123,
			    someBoolean: true
			};
			
			test('Stringifying an object', function() {
				json = Spark.json.stringify(obj);
				equals('{"someArray":["foo","bar",123],"someObject":{"foo":"bar","embedded":{"eleet":1337}},"someString":"\\"Hi there!\\"","someNumber":123,"someBoolean":true}', json, 'The JSON should equal this JSON');
			});
			
			test('Parsing JSON', function() {
				equals(123, Spark.json.parse(json).someNumber, 'Object.someNumber should equal this 123');
			});
			
			
			
			module('style');
			
			test('Setting a style', function() {
				var style = $('p#test').style('opacity', '0.5').style('opacity');
				equals('0.5', style, 'The style (opacity) should equal 0.5');
			});
			
			test('Setting a style with an object', function() {
				var style = $('p#test').style({
					border: '3px solid #0000FF',
					'border-width': '1px',
					opacity: '0.7'
				}).style('border-width');
				equals('1px', style, 'The style (border-width) should equal "1px"');
			});
		</script>
	</body>
</html>